<th:block xmlns="http://www.w3.org/1999/xhtml"
          xmlns:th="http://www.w3.org/1999/xhtml" th:fragment="deliveryInfo">

    <!-- Транспортировка -->
    <div class="tab-pane fade show active container-fluid" id="transportation">

        <table class="table table-hover table-striped" id="transportationtable">
            <br>
            <thead>
            <tr>
                <th></th>
                <th scope="col">№ выгрузки</th>
                <th scope="col">А/М</th>
                <th scope="col">П/П</th>
                <th scope="col">Дата выгрузки</th>
                <th scope="col">Время выгрузки</th>
                <th scope="col">Водитель</th>
                <th scope="col">Телефон</th>
                <th scope="col">№ контракта</th>
                <th scope="col">Кубатура</th>
                <th scope="col">Примечание</th>
                <th scope="col">Contact id</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
                  <div th:each="dd, index : ${deliveryDocumentations}">
                          <tr>
                              <td  class="details-control" onclick="javascript:$('#parent'+this.id).toggle();" th:id="${dd.id}"></td>
                              <td th:text="${dd.driverInfo.getIdOfTruck()}"></td>
                              <td th:text="${dd.driverInfo.getNumberOfTruck()}"></td>
                              <td th:text="${dd.driverInfo.getNumberOfTrailer()}"></td>
                              <td th:text="${dd.getDateOfUnloading()}"></td>
                              <td th:text="${dd.getTimeOfUnloading()}"></td>
                              <td th:text="${dd.driverInfo.getFullName()}"></td>
                              <td th:text="${dd.driverInfo.getPhone()}"></td>
                              <td th:text="${dd.orderInfo?.codeOfOrder}"></td>
                              <td th:text="${dd.packagesExtent}"></td>
                              <td th:text="${(dd.description==null)?'':dd.description}"></td>
                              <td th:text="${dd?.orderInfo?.id}"></td>
                              <td>
                                  <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="editDriverInfo(this)">
                                      <i class="fas fa-pen" data-toggle="tooltip" title="Редактировать"></i>
                                  </button>
                                  <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="addDriverPackage(this)">
                                      <i class="fas fa-plus" data-toggle="tooltip" title="Добавить пачку"></i>
                                  </button>
                                  <form th:if="${btnConfig?.equals('btnON')}" th:action="@{'/fabric/exportDeliveryInfo-'+${dd.id}}" method="post" style="display: contents;">
                                      <button  type="submit" class="btn btn-primary btn-sm">
                                          <i class="far fa-file-excel" data-toggle="tooltip" title="Экспортировать"></i>
                                      </button>
                                  </form>
                              </td>
                          </tr>
                          <tr style="display:none" th:id="'parent'+${dd.id}">
                              <td colspan="13" class="child-table">
                                  <table class="table table-hover table-striped parent-table" id="packages">
                                      <thead>
                                      <tr>
                                          <th scope="col">№ пачки</th>
                                          <th scope="col">Порода</th>
                                          <th scope="col">Описание</th>
                                          <th scope="col">Толщина</th>
                                          <th scope="col">Ширина</th>
                                          <th scope="col">Длина</th>
                                          <th scope="col">Кол-во</th>
                                          <th scope="col">Кубатура</th>
                                          <th scope="col">Высота</th>
                                          <th scope="col">Ширина</th>
                                          <th scope="col">Длина-ФАКТ</th>
                                          <th scope="col">В/Ш</th>
                                          <th></th>
                                      </tr>
                                      </thead>
                                      <tbody>
                                      <tr th:each="ps, index : ${dd.getProductList()}" th:id="${ps.id}">
                                          <th scope="row" th:text="${ps.codeOfPackage}"></th>
                                          <td th:text="${(ps.breedOfTree!=null)?ps.breedOfTree.breed:''}"></td>
                                          <td th:text="${ps.breedDescription}"></td>
                                          <td th:text="${ps.sizeOfHeight}"></td>
                                          <td th:text="${ps.sizeOfWidth}"></td>
                                          <td th:text="${ps.sizeOfLong}"></td>
                                          <td th:text="${ps.countOfDesk}"></td>
                                          <td th:text="${ps.extent}"></td>
                                          <td th:text="${ps.countDeskInHeight}"></td>
                                          <td th:text="${ps.countDeskInWidth}"></td>
                                          <td th:text="${ps.longFact}"></td>
                                          <td th:text="${ps.height_width}"></td>
                                          <td style="width: 70px">
                                              <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="editDriverPackage(this)"><i class="fas fa-pen" data-toggle="tooltip" title="Редактировать"></i></button>
                                              <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="deleteDriverPackage(this)"><i class="fas fa-trash-alt" data-toggle="tooltip" title="Удалить"></i></button>
                                          </td>
                                      </tr>
                                      </tbody>
                                  </table>
                              </td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                              <td style="display:none"></td>
                          </tr>
                  </div>
            </tbody>
            <tfoot>
            <tr>
                <th></th>
                <th scope="col">№ выгрузки</th>
                <th scope="col">А/М</th>
                <th scope="col">П/П</th>
                <th scope="col">Дата выгрузки</th>
                <th scope="col">Время выгрузки</th>
                <th scope="col">Водитель</th>
                <th scope="col">Телефон</th>
                <th scope="col">№ контракта</th>
                <th scope="col">Кубатура</th>
                <th scope="col">Примечание</th>
                <th scope="col">Contact id</th>
                <th></th>
            </tr>
            </tfoot>
        </table>

    </div>
    <!-- Транспортировка -->

<!--    Edit driver start-->
    <div class="modal fade" id="editDriverInfoModal">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Редактировать</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form  th:action="${urlEditDriver}" method="post">
                    <div class="modal-body">
                        <input type="number" id="driverId" hidden="" name="id">

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-3">
                                <label class="col-form-label" for="editIdOfTruck">№ выгрузки</label>
                                <input type="text" class="form-control"  id="editIdOfTruck"  autocomplete="off" required="required" name="driverInfo.idOfTruck">
                            </div>
                            <div class="col-6">
                                <label for="editDriverCredentionals" class="col-form-label">Имя, Фамилия водителя</label>
                                <input type="text" class="form-control" id="editDriverCredentionals" required="required" autocomplete="off" name="driverInfo.fullName">
                            </div>
                            <div class="col-3">
                                <label for="editDriverPhone" class="col-form-label">Телефон</label>
                                <input type="text" class="form-control" id="editDriverPhone" required="required" autocomplete="off" name="driverInfo.phone">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-3">
                                <label for="editNumberOfTruck" class="col-form-label">Номер фуры</label>
                                <input type="text" class="form-control" id="editNumberOfTruck" required="required" autocomplete="off" name="driverInfo.numberOfTruck">
                            </div>
                            <div class="col-3">
                                <label for="editNumberOfTrailer" class="col-form-label">Номер прицепа</label>
                                <input type="text" class="form-control" id="editNumberOfTrailer" required="required" autocomplete="off" name="driverInfo.numberOfTrailer">
                            </div>
                            <div class="col-3">
                                <label for="editPackDateInput" class="col-form-label">Дата выгрузки</label>
                                <input class="form-control" type="date" id="editPackDateInput" required="required" name="dateOfUnloading">
                            </div>
                            <div class="col-3">
                                <label for="editPackTimeInput" class="col-form-label">Время выгрузки</label>
                                <input type="text" class="form-control" id="editPackTimeInput" required="required" autocomplete="off" name="timeOfUnloading">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-3">
                                <label class="col-form-label" for="editPackContractId" >Контракт</label>
                                <input type="text" class="form-control" list="contractList" id="editPackContractId" required="required" autocomplete="off" onchange="setHiddenValue(this)">
                                <datalist id="contractList">
                                    <option th:each="contract : ${contractList}"  th:data-value="${contract.id}" th:text="${contract.codeOfOrder}" th:label="${contract?.contrAgent?.nameOfAgent}"></option>
                                </datalist>
                                <input type="hidden" name="orderInfo.id" id="editPackContractId-hidden">
                            </div>
                            <div class="col-3">
                                <label for="editPackDeliveryDestination" class="col-form-label">Кубатура</label>
                                <input type="number" class="form-control"  id="editPackDeliveryDestination" required="required" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="packagesExtent" disabled="disabled">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editDeliveryDescription">Примечания</label>
                                <input type="text" class="form-control" placeholder="" id="editDeliveryDescription"  autocomplete="off" name="description">
                            </div>
                        </div>

                    </div>

                    <!-- Insert rows -->
                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Сохранить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
<!--Edit end-->

    <!--    Edit package start-->
    <div class="modal fade" id="editDriverPackagesModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Редактировать пачку</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form  th:action="${urlEditPackage}" method="post">
                    <div class="modal-body">
                        <input type="text" id="packageId" hidden="" name="id">

                        <label class="col-form-label" for="editIdOfPack">№ пачки</label>
                        <input type="text" class="form-control" placeholder="" id="editIdOfPack" autocomplete="off" required="required" name="codeOfPackage">

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-6">
                                <label class="control-label" for="editDeliveryBreedOfTree">Порода</label>
                                <input type="text" class="form-control" list="editBreedOfTreeList" id="editDeliveryBreedOfTree" required="required" autocomplete="off" name="breedOfTree.breed">
                                <datalist id="editBreedOfTreeList">
                                    <option th:each="b : ${breedOfTreeList}"  th:value="${b.breed}">
                                </datalist>
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editBreedDescriptionDelivery">Описание</label>
                                <input type="text" class="form-control" id="editBreedDescriptionDelivery" autocomplete="off"  name="breedDescription">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackThickness">Толщина</label>
                                <input type="number" placeholder="мм" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDeliveryPackThickness" required="required" autocomplete="off" name="sizeOfHeight">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackWidth">Ширина</label>
                                <input type="number" placeholder="мм" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDeliveryPackWidth" required="required" autocomplete="off" name="sizeOfWidth">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackLength">Длина</label>
                                <input type="number" placeholder="мм" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDeliveryPackLength" required="required" autocomplete="off" name="sizeOfLong">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackCount">Кол-во досок</label>
                                <input type="number" placeholder="шт" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDeliveryPackCount" required="required" autocomplete="off" name="countOfDesk">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackExtent">Кубатура</label>
                                <input type="number" step="any" pattern="[0-9]*\.?[0-9]*"  placeholder="м3" class="form-control" id="editDeliveryPackExtent" required="required" autocomplete="off" name="extent">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackHeightPc">Высота, шт.</label>
                                <input type="number" placeholder="шт" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDeliveryPackHeightPc" required="required" autocomplete="off" name="countDeskInHeight">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackWidthPc">Ширина, шт.</label>
                                <input type="number" placeholder="шт" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDeliveryPackWidthPc" required="required" autocomplete="off" name="countDeskInWidth">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackLengthFact">Длина - ФАКТ</label>
                                <input type="number" placeholder="мм" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDeliveryPackLengthFact" required="required" autocomplete="off" name="longFact">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="editDeliveryPackWidthHeight">Высота/Ширина</label>
                                <input type="text" class="form-control" id="editDeliveryPackWidthHeight" placeholder="в/ш" autocomplete="off" name="height_width">
                            </div>
                        </div>

                    </div>

                    <!-- Insert rows -->
                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Сохранить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Edit end-->

    <!--    Add package start-->
    <div class="modal fade" id="addDriverPackagesModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Добавить пачку</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form  th:action="${urlAddPackage}" method="post">
                    <div class="modal-body">
                        <input type="number" id="driverDeliveryId" hidden="" name="docId">

                        <label class="col-form-label" for="addIdOfPack">№ пачки</label>
                        <input type="text" class="form-control" placeholder="" id="addIdOfPack" autocomplete="off" required="required" name="codeOfPackage">

                        <label class="col-form-label" for="addPackDryStorage">Сухой склад</label>
                        <input type="text" class="form-control" list="dryList" id="addPackDryStorage" required="required" autocomplete="off" onchange="setHiddenValue(this)">
                        <datalist id="dryList">
                            <option  th:each="c : ${dryStorageList}" th:data-value="${c.id}" th:text="${c.codeOfProduct}" th:label="${c?.extent}">
                            </option>
                        </datalist>
                        <input type="number" hidden="hidden"  name="dryStorageId" id="addPackDryStorage-hidden">

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-6">
                                <label class="control-label" for="addDeliveryBreedOfTree">Порода</label>
                                <input type="text" class="form-control" list="addBreedOfTreeList" id="addDeliveryBreedOfTree" required="required" autocomplete="off" name="breedOfTree.breed">
                                <datalist id="addBreedOfTreeList">
                                    <option th:each="b : ${breedOfTreeList}"  th:value="${b.breed}">
                                </datalist>
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="addBreedDescriptionDelivery">Описание</label>
                                <input type="text" class="form-control" id="addBreedDescriptionDelivery" autocomplete="off"  name="breedDescription">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackThickness">Толщина</label>
                                <input type="number" placeholder="мм" pattern="[0-9]*\.?[0-9]*" class="form-control" id="addDeliveryPackThickness" required="required" autocomplete="off" name="sizeOfHeight">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackWidth">Ширина</label>
                                <input type="number" placeholder="мм" pattern="[0-9]*\.?[0-9]*" class="form-control" id="addDeliveryPackWidth" required="required" autocomplete="off" name="sizeOfWidth">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackLength">Длина</label>
                                <input type="number" placeholder="мм" pattern="[0-9]*\.?[0-9]*" class="form-control" id="addDeliveryPackLength" required="required" autocomplete="off" name="sizeOfLong">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackCount">Кол-во досок</label>
                                <input type="number" placeholder="шт" pattern="[0-9]*\.?[0-9]*" class="form-control" id="addDeliveryPackCount" required="required" autocomplete="off" name="countOfDesk">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackExtent">Кубатура</label>
                                <input type="number" step="any" pattern="[0-9]*\.?[0-9]*"  placeholder="м3" class="form-control" id="addDeliveryPackExtent" required="required" autocomplete="off" name="extent">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackHeightPc">Высота, шт.</label>
                                <input type="number" placeholder="шт" pattern="[0-9]*\.?[0-9]*" class="form-control" id="addDeliveryPackHeightPc" required="required" autocomplete="off" name="countDeskInHeight">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackWidthPc">Ширина, шт.</label>
                                <input type="number" placeholder="шт" pattern="[0-9]*\.?[0-9]*" class="form-control" id="addDeliveryPackWidthPc" required="required" autocomplete="off" name="countDeskInWidth">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackLengthFact">Длина - ФАКТ</label>
                                <input type="number" placeholder="мм" pattern="[0-9]*\.?[0-9]*" class="form-control" id="addDeliveryPackLengthFact" required="required" autocomplete="off" name="longFact">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackWidthHeight">Высота/Ширина</label>
                                <input type="text" class="form-control" id="addDeliveryPackWidthHeight" placeholder="в/ш" autocomplete="off" name="height_width">
                            </div>
                        </div>

                    </div>

                    <!-- Insert rows -->
                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Добавить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Add end-->

    <!--  Modal confirmation  -->
    <div class="modal fade" id="deletePackModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Удаление пачек</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!--       TUT         -->
                <form  th:action="${urlDeletePackage}" method="post">
                    <div class="modal-body">

                        <div class="form-group">
                            <input type="text" class="form-control" id="deleteDeliveryId" hidden="hidden" autocomplete="off" name="deliveryId">
                            <input type="text" class="form-control" id="deletePackModalId" hidden="hidden" autocomplete="off" name="id">

                            <p id="deletePackModalConfirmation">
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Удалить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--  Modal confirmation  -->

    <script type="text/javascript">
        function editDriverInfo(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            // let trId =  $(trObj).attr('id');


            var trId =              $(trObj).find('td:eq(0)').attr('id');
            var truck =             $(trObj).find('td:eq(1)').text();
            var truckNum =          $(trObj).find('td:eq(2)').text();
            var trailerNum  =       $(trObj).find('td:eq(3)').text();
            var packDate  =         $(trObj).find('td:eq(4)').text();
            var packTime  =         $(trObj).find('td:eq(5)').text();
            var driver =            $(trObj).find('td:eq(6)').text();
            var phone =             $(trObj).find('td:eq(7)').text();
            var contract =          $(trObj).find('td:eq(8)').text();
            var destination =       $(trObj).find('td:eq(9)').text();
            var delDescription =    $(trObj).find('td:eq(10)').text();
            var contractId =        $(trObj).find('td:eq(11)').text();


            $('#driverId')                      .val(trId);
            $('#editIdOfTruck')                 .val(truck);
            $('#editDriverCredentionals')       .val(driver);
            $('#editDriverPhone')               .val(phone);
            $('#editNumberOfTruck')             .val(truckNum);
            $('#editNumberOfTrailer')           .val(trailerNum);
            $('#editPackDateInput')             .val(packDate);
            $('#editPackTimeInput')             .val(packTime);
            $('#editPackContractId')            .val(contract);
            $('#editPackDeliveryDestination')   .val(destination);
            $('#editDeliveryDescription')       .val(delDescription);
            $('#editPackContractId-hidden')       .val(contractId);

            $('#editDriverInfoModal').modal('show');
        }
    </script>

    <script type="text/javascript">
        function editDriverPackage(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            let trId =  $(trObj).attr('id');
            $('#packageId').val(trId);

            var pack =              $(trObj).find('th:eq(0)').text();
            var breedOfTree =       $(trObj).find('td:eq(0)').text();
            var breedDescription =  $(trObj).find('td:eq(1)').text();
            var thickness =         $(trObj).find('td:eq(2)').text();
            var width =             $(trObj).find('td:eq(3)').text();
            var length =            $(trObj).find('td:eq(4)').text();
            var packCount =         $(trObj).find('td:eq(5)').text();
            var extent =            $(trObj).find('td:eq(6)').text();
            var heightPc =          $(trObj).find('td:eq(7)').text();
            var widthPc =           $(trObj).find('td:eq(8)').text();
            var lengthFact =        $(trObj).find('td:eq(9)').text();
            var widthHeight =       $(trObj).find('td:eq(10)').text();


            $('#editIdOfPack')                  .val(pack);
            $('#editDeliveryBreedOfTree')       .val(breedOfTree);
            $('#editBreedDescriptionDelivery')  .val(breedDescription);
            $('#editDeliveryPackThickness')     .val(thickness);
            $('#editDeliveryPackWidth')         .val(width);
            $('#editDeliveryPackLength')        .val(length);
            $('#editDeliveryPackCount')         .val(packCount);
            $('#editDeliveryPackExtent')        .val(extent);
            $('#editDeliveryPackHeightPc')      .val(heightPc);
            $('#editDeliveryPackWidthPc')       .val(widthPc);
            $('#editDeliveryPackLengthFact')    .val(lengthFact);
            $('#editDeliveryPackWidthHeight')    .val(widthHeight);

            $('#editDriverPackagesModal').modal('show');
        }
    </script>

    <script type="text/javascript">
        function addDriverPackage(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            let trId =  $(trObj).find('td:eq(0)').attr('id');
            $('#driverDeliveryId').val(trId);

            $('#addDriverPackagesModal').modal('show');
        }
    </script>

    <script type="text/javascript">
        function deleteDriverPackage(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            let trId =  $(trObj).attr('id');
            $('#deletePackModalId').val(trId);
            console.log(  $(trObj).attr('id'));

            let expandedObj = trObj.parentElement.parentElement.parentElement.parentElement;
            let expandedId = $(expandedObj).attr('id');
            console.log("fullId: "+expandedId);
            let deliveryId = expandedId.replace(/\D+/g, "");
            console.log("Id: "+deliveryId);

            $('#deleteDeliveryId').val(deliveryId);

            var codeOfPackage = $(trObj).find('th:eq(0)').text();

            $('#deletePackModalConfirmation').text(" Вы уверены, что хотите окончательно удалить пачку "+codeOfPackage+" ?");
            $('#deletePackModal').modal('show');
        }
    </script>


</th:block>









































<!--OAK DElivery info-->
<th:block xmlns="http://www.w3.org/1999/xhtml"
          xmlns:th="http://www.w3.org/1999/xhtml" th:fragment="deliveryInfoOak">

        <!-- Транспортировка OAK-->
        <div class="tab-pane fade show active container-fluid" id="transportation">

            <table class="table table-hover table-striped" id="transportationTableOak">
                <br>
                <thead>
                    <tr>
                        <th></th>
                        <th scope="col">№ выгрузки</th>
                        <th scope="col">А/М</th>
                        <th scope="col">П/П</th>
                        <th scope="col">Дата выгрузки</th>
                        <th scope="col">Время выгрузки</th>
                        <th scope="col">Водитель</th>
                        <th scope="col">Телефон</th>
                        <th scope="col">№ контракта</th>
                        <th scope="col">Кубатура</th>
                        <th scope="col">Примечание</th>
                        <th scope="col">Contact id</th>
                        <th></th>
                    </tr>
                </thead>

                <tbody>
                    <div th:each="dd, index : ${deliveryDocumentations}">

                        <tr>
                            <td  class="details-control" onclick="javascript:$('#parent'+this.id).toggle();" th:id="${dd.id}"></td>
                            <td th:text="${dd.driverInfo.getIdOfTruck()}"></td>
                            <td th:text="${dd.driverInfo.getNumberOfTruck()}"></td>
                            <td th:text="${dd.driverInfo.getNumberOfTrailer()}"></td>
                            <td th:text="${dd.getDateOfUnloading()}"></td>
                            <td th:text="${dd.getTimeOfUnloading()}"></td>
                            <td th:text="${dd.driverInfo.getFullName()}"></td>
                            <td th:text="${dd.driverInfo.getPhone()}"></td>
                            <td th:text="${dd.orderInfo?.codeOfOrder}"></td>
                            <td th:text="${dd.packagesExtent}"></td>
                            <td th:text="${(dd.description==null)?'':dd.description}"></td>
                            <td th:text="${dd?.orderInfo?.id}"></td>
                            <td>
                                <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="editOakDriverInfo(this)"><i class="fas fa-pen" data-toggle="tooltip" title="Редактировать"></i></button>
                                <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="addOakDriverPackage(this)"><i class="fas fa-plus" data-toggle="tooltip" title="Добавить пачку"></i></button>
                                <form th:if="${btnConfig?.equals('btnON')}" th:action="@{'/fabric/exportDeliveryInfo-'+${dd.id}}" method="post" style="display: contents;">
                                    <button  type="submit" class="btn btn-primary btn-sm">
                                        <i class="far fa-file-excel" data-toggle="tooltip" title="Экспортировать"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>

                        <!--      LEVEL    2    START          -->
                        <tr style="display:none" th:id="'parent'+${dd.id}">
                            <td colspan="13" class="child-table">
                                <table class="table table-hover table-striped parent-table" id="packages">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th scope="col">№ пачки</th>
                                            <th scope="col">Качество</th>
                                            <th scope="col">Размер</th>
                                            <th scope="col">Длина</th>
                                            <th scope="col">Сум. ширина</th>
                                            <th scope="col">Кол. досок</th>
                                            <th scope="col">Кубатура</th>
                                            <th scope="col" style="width: 100px"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <div th:each="ps, index : ${dd.getProductList()}">
                                            <tr th:id="${ps.id}">
                                                <td  class="details-control" onclick="javascript:$('#parent-parent'+this.id).toggle();" th:id="${ps.id}" style="width: 30px;"></td>
                                                <th scope="row" th:text="${ps.codeOfPackage}">20-1С3-2605-1-2805</th>
                                                <td th:text="${ps.quality}"></td>
                                                <td th:text="${ps.sizeOfHeight}"></td>
                                                <td th:text="${ps.sizeOfLong}"></td>
                                                <td th:text="${ps.sumWidthOfAllDesk}"></td>
                                                <td th:text="${ps.countOfDesk}"></td>
                                                <td th:text="${ps.extent}"></td>
                                                <td style="width: 100px; text-align: end">
                                                    <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="editOakDriverPackage(this)"><i class="fas fa-pen" data-toggle="tooltip" title="Редактировать"></i></button>
                                                    <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="addOakDriverPackageItems(this)"><i class="fas fa-plus" data-toggle="tooltip" title="Добавить позицию к пачке"></i></button>
                                                    <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="deleteOakDriverPackage(this)"><i class="fas fa-trash-alt" data-toggle="tooltip" title="Удалить"></i></button>
                                                </td>
                                            </tr>

                                            <!--      LEVEL    3    START          -->
                                            <tr style="display:none" th:id="'parent-parent'+${ps.id}">
                                                <td colspan="13" class="child-table">
                                                    <table class="table table-hover table-striped parent-table" id="packages">
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Ширина, мм</th>
                                                                <th scope="col">Количество досок</th>
                                                                <th scope="col"></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>

                                                            <tr th:each="desc, index : ${ps.deskOakList}" th:id="${desc.id}">
                                                                <td th:text="${desc.sizeOfWidth}"></td>
                                                                <td th:text="${desc.countOfDesk}"></td>
                                                                <td style="text-align: end;">
                                                                    <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="editOakDriverPackageItem(this)"><i class="fas fa-pen" data-toggle="tooltip" title="Редактировать"></i></button>
                                                                    <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="deleteOakDriverPackageItem(this)"><i class="fa fa-times" data-toggle="tooltip" title="Удалить"></i></button>
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </td>
                                                <td style="display:none"></td>
                                                <td style="display:none"></td>
                                                <td style="display:none"></td>
                                                <td style="display:none"></td>
                                                <td style="display:none"></td>
                                                <td style="display:none"></td>
                                                <td style="display:none"></td>
                                                <td style="display:none"></td>

                                            </tr>
                                            <!--      LEVEL    3    END          -->
                                        </div>

                                    </tbody>
                                </table>
                            </td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                        </tr>
                        <!--      LEVEL    2    END          -->
                    </div>
                </tbody>
                <tfoot>
                <tr>
                    <th></th>
                    <th scope="col">№ выгрузки</th>
                    <th scope="col">А/М</th>
                    <th scope="col">П/П</th>
                    <th scope="col">Дата выгрузки</th>
                    <th scope="col">Время выгрузки</th>
                    <th scope="col">Водитель</th>
                    <th scope="col">Телефон</th>
                    <th scope="col">№ контракта</th>
                    <th scope="col">Кубатура</th>
                    <th scope="col">Примечание</th>
                    <th scope="col">Contact id</th>
                    <th></th>
                </tr>
                </tfoot>
            </table>

        </div>


    <!-- Edit delivery start   -->
    <div class="modal fade" id="editOakDeliveryModal">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Редактировать</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form  th:action="${urlEditDriver}" method="post">
                    <div class="modal-body">
                        <input type="number" id="driverOakId" hidden="" name="id">

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-3">
                                <label class="col-form-label" for="editOakIdOfTruck">№ выгрузки</label>
                                <input type="text" class="form-control"  id="editOakIdOfTruck"  autocomplete="off" required="required" name="driverInfo.idOfTruck">
                            </div>
                            <div class="col-6">
                                <label for="editOakDriverCredentionals" class="col-form-label">Имя, Фамилия водителя</label>
                                <input type="text" class="form-control" id="editOakDriverCredentionals" required="required" autocomplete="off" name="driverInfo.fullName">
                            </div>
                            <div class="col-3">
                                <label for="editOakDriverPhone" class="col-form-label">Телефон</label>
                                <input type="text" class="form-control" id="editOakDriverPhone" required="required" autocomplete="off" name="driverInfo.phone">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-3">
                                <label for="editOakNumberOfTruck" class="col-form-label">Номер фуры</label>
                                <input type="text" class="form-control" id="editOakNumberOfTruck" required="required" autocomplete="off" name="driverInfo.numberOfTruck">
                            </div>
                            <div class="col-3">
                                <label for="editOakNumberOfTrailer" class="col-form-label">Номер прицепа</label>
                                <input type="text" class="form-control" id="editOakNumberOfTrailer" required="required" autocomplete="off" name="driverInfo.numberOfTrailer">
                            </div>
                            <div class="col-3">
                                <label for="editOakPackDateInput" class="col-form-label">Дата выгрузки</label>
                                <input class="form-control" type="date" id="editOakPackDateInput" required="required" name="dateOfUnloading">
                            </div>
                            <div class="col-3">
                                <label for="editOakPackTimeInput" class="col-form-label">Время выгрузки</label>
                                <input type="text" class="form-control" id="editOakPackTimeInput" required="required" autocomplete="off" name="timeOfUnloading">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-3">
                                <label class="col-form-label" for="editOakPackContractId" >Контракт</label>
                                <input type="text" class="form-control" list="contractOakList" id="editOakPackContractId" required="required" autocomplete="off" onchange="setHiddenValue(this)">
                                <datalist id="contractOakList">
                                    <option th:each="contract : ${contractList}"  th:data-value="${contract.id}" th:text="${contract.codeOfOrder}" th:label="${contract?.contrAgent?.nameOfAgent}"></option>
                                </datalist>
                                <input type="hidden" name="orderInfo.id" id="editOakPackContractId-hidden">
                            </div>
                            <div class="col-3">
                                <label for="editOakPackDeliveryDestination" class="col-form-label">Кубатура</label>
                                <input type="text" class="form-control"  id="editOakPackDeliveryDestination" required="required" autocomplete="off" name="packagesExtent">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editDeliveryDescription">Примечания</label>
                                <input type="text" class="form-control" placeholder="" id="editOakDeliveryDescription"  autocomplete="off" name="description">
                            </div>
                        </div>
                    </div>
                    <!-- Insert rows -->

                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Сохранить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Edit delivery end   -->

    <!-- Edit package start   -->
    <div class="modal fade" id="editOakDeliveryPackageModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editOakPackModalHeader"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form  th:action="${urlEditPackage}" method="post">
                    <div class="modal-body">
                        <input type="number" id="driverOakPackageId" hidden="" name="id">

                        <label class="col-form-label" for="editOakIdOfPack">№ пачки</label>
                        <input type="text" class="form-control"  id="editOakIdOfPack"  autocomplete="off" required="required" name="codeOfPackage">

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-4">
                                <label for="editOakQuality" class="col-form-label">Качество</label>
                                <input type="text" class="form-control" id="editOakQuality" required="required" autocomplete="off" name="quality">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="editOakPackSize">Размер</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control"  id="editOakPackSize"  autocomplete="off" required="required" name="sizeOfHeight">
                            </div>
                            <div class="col-4">
                                <label for="editOakPackLength" class="col-form-label">Длина</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="editOakPackLength" required="required" autocomplete="off" name="sizeOfLong">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-4">
                                <label for="editOakPackSummaryLen" class="col-form-label">Сумарная ширина</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="editOakPackSummaryLen" required="required" autocomplete="off" name="sumWidthOfAllDesk">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="editOakPackDescCount">Количество досок</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="шт" class="form-control"  id="editOakPackDescCount"  autocomplete="off" required="required" name="countOfDesk">
                            </div>
                            <div class="col-4">
                                <label for="editOakPackExtent" class="col-form-label">Кубатура</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="м3" step="any" class="form-control" id="editOakPackExtent" required="required" autocomplete="off" name="extent">
                            </div>
                        </div>
                    </div>
                    <!-- Insert rows -->

                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Сохранить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Edit package end   -->

    <!-- Edit package content start   -->
    <div class="modal fade" id="editOakDeliveryPackageContentModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Редактировать</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form  th:action="${urlEditPackageDescriptionOak}" method="post">
                    <div class="modal-body">
                        <input type="number" id="driverOakPackageContentId" hidden="" name="rowId">
                        <input type="number" id="deleteOakPackageId" hidden="" name="packageId">

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-6">
                                <label for="editOakDeliveryPackageContentWidth" class="col-form-label">Ширина, мм</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="editOakDeliveryPackageContentWidth" required="required" autocomplete="off" name="width">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editOakDeliveryPackageContentCount">Количество досок</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="шт" class="form-control"  id="editOakDeliveryPackageContentCount"  autocomplete="off" required="required" name="count">
                            </div>
                        </div>
                    </div>
                    <!-- Insert rows -->

                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Сохранить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Edit package content end   -->

    <!-- Add package start -->
    <div class="modal fade" id="addDriverPackageModalOak">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title ">Добавление пачки</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form >
                    <div class="modal-body">

                        <div class="form-group row">
                            <input type="text" hidden="hidden" id="driverOakDeliveryId" name="driverId">
                            <input type="number" hidden="hidden" id="breedId" th:value="${breedId}">

                            <div class="col-4">
                                <label class="col-form-label" for="addDeliveryPackageModalCodeOak">Код пачки</label>
                                <input type="text" class="form-control" id="addDeliveryPackageModalCodeOak" required="required" autocomplete="off">
                            </div>

                            <div class="col-4">
                                <label class="control-label" for="addDeliveryPackageModalQualityOak" style="padding-top: 7px">Качество</label>
                                <input type="text" class="form-control" id="addDeliveryPackageModalQualityOak" required="required">
                            </div>

                            <div class="col-2">
                                <label class="control-label" for="addDeliveryPackageModalSizeOak" style="padding-top: 7px">Размер</label>
                                <input type="number" min="1" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="addDeliveryPackageModalSizeOak" required="required">
                            </div>

                            <div class="col-2">
                                <label class="col-form-label" for="addDeliveryPackageModalLengthOak">Длина</label>
                                <input type="number" min="1" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="addDeliveryPackageModalLengthOak" required="required" autocomplete="off">
                            </div>
                        </div>

                        <hr>

                        <div class="form-group row d-flex" style="align-items: flex-end">
                            <div class="col-5">
                                <label class="col-form-label" for="addDeliveryPackageModalWidthOak">Ширина</label>
                                <input type="number" min="1" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="addDeliveryPackageModalWidthOak" required="required" autocomplete="off">
                            </div>

                            <div class="col-5">
                                <label class="control-label" for="addDeliveryPackageModalCountOak" style="padding-top: 7px">Количество</label>
                                <input type="number" min="1" pattern="[0-9]*\.?[0-9]*" placeholder="шт" class="form-control" id="addDeliveryPackageModalCountOak" required="required" autocomplete="off">
                            </div>

                            <div class="col-2">
                                <button id="buttonForAddingDeliveryOakRow" type="button" class="btn btn-primary" style="width: 100%">Добавить</button>
                            </div>
                        </div>

                        <table class="table table-hover table-striped" id="tableForTransportationOak">
                            <thead>
                            <tr>
                                <th scope="col">Толщина, мм</th>
                                <th scope="col">Количество досок, шт</th>
                                <th></th>
                            </tr>
                            </thead>

                            <tbody id="listOfOakPackageId">
                            <!-- <tr></tr> -->
                            </tbody>

                            <tfoot>
                                <th scope="col">Толщина, мм</th>
                                <th scope="col">Количество досок, шт</th>
                                <th></th>
                            </tfoot>

                        </table>


                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" id="createPackageOak" onclick="sendRequestCreateDeliveryPackageOak(this)">Готово</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Add package end-->

    <!-- Add package content start   -->
    <div class="modal fade" id="addOakDeliveryPackageContentModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addOakDriverPackageItemsModalHeader"> </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form  th:action="${urlAddPackageDescriptionOak}" method="post">
                    <div class="modal-body">
                        <input type="number" id="addOakDriverPackageItemsPackId" hidden="" name="packageId">

                        <div class="form-group row d-flex" style="align-items: flex-end;margin-bottom: 0">
                            <div class="col-6">
                                <label for="addOakDeliveryPackageContentWidth" class="col-form-label">Ширина</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="addOakDeliveryPackageContentWidth" required="required" autocomplete="off" name="width">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="addOakDeliveryPackageContentCount">Количество досок</label>
                                <input type="number" pattern="[0-9]*\.?[0-9]*" placeholder="шт" class="form-control"  id="addOakDeliveryPackageContentCount"  autocomplete="off" required="required" name="count">
                            </div>
                        </div>
                    </div>
                    <!-- Insert rows -->

                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Сохранить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Add package content end   -->

    <!--  Modal package delete confirmation start -->
    <div class="modal fade" id="deleteOakPackModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Удаление пачек</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!--       TUT         -->
                <form  th:action="${urlDeletePackage}" method="post">
                    <div class="modal-body">

                        <div class="form-group">
                            <input type="text" class="form-control" id="deleteOakDeliveryId" hidden="hidden" autocomplete="off" name="deliveryId">
                            <input type="text" class="form-control" id="deleteOakPackModalId" hidden="hidden" autocomplete="off" name="id">

                            <p id="deleteOakPackModalConfirmation">
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Удалить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--  Modal package delete confirmation end -->

    <!--  Modal package item delete confirmation start -->
    <div class="modal fade" id="deleteOakPackItemModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Удаление пачек</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!--       TUT         -->
                <form  th:action="${urlDeleteDescriptionOak}" method="post">
                    <div class="modal-body">

                        <div class="form-group">
                            <input type="text" class="form-control" id="deleteOakPackId" hidden="hidden" autocomplete="off" name="packageId">
                            <input type="text" class="form-control" id="deleteOakPackItemModalId" hidden="hidden" autocomplete="off" name="id">

                            <p id="deleteOakPackItemModalConfirmation">
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Удалить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--  Modal package item delete confirmation end -->


    <!--    Add delivery package start-->
    <script type="text/javascript">
        function addOakDriverPackage(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            // let trId =  $(trObj).attr('id');
            var trId =  $(trObj).find('td:eq(0)').attr('id');
            console.log("row id: "+trId);
            $('#driverOakDeliveryId').val(trId);

            $('#addDriverPackageModalOak').modal('show');

            // CHECK
            $("#sendForPackageModalSizeOak").change(function(){
                if ((parseInt($('#sendForPackageModalSizeOak').val()))<=0) {
                    alert("Введите правильное значение");
                    $('#sendForPackageModalSizeOak').val("1");
                }else{

                }
            });

            $("#sendForPackageModalLengthOak").change(function(){
                if ((parseInt($('#sendForPackageModalLengthOak').val()))<=0) {
                    alert("Введите правильное значение");
                    $('#sendForPackageModalLengthOak').val("1");
                }else{

                }
            });
            // CHECK
        }

        // Ajax
        function sendRequestCreateDeliveryPackageOak(btnObj) {
            var deliveryId1 = $("#driverOakDeliveryId").val();
            var codeOfPackage1 = $('#addDeliveryPackageModalCodeOak').val();
            var quality1 = $('#addDeliveryPackageModalQualityOak').val();
            var sizeOfHeight1 = $('#addDeliveryPackageModalSizeOak').val();
            var long1 = $('#addDeliveryPackageModalLengthOak').val();
            var breedID1 = $("#breedId").val();


            console.log("delivery id:" + deliveryId1+"\npackage: "+codeOfPackage1+"\nqual: "+quality1+ "\nheight: "+sizeOfHeight1+"\nlength: "+long1);


            var tableBody = document.getElementById('listOfOakPackageId');
            var listTr = tableBody.getElementsByTagName('tr');

            var arrOfDesk = [];

            //fix one dimension array on controller
            arrOfDesk[0] = [];
            arrOfDesk[0][0] = "test";
            arrOfDesk[0][1] = "test";



            if (codeOfPackage1 != "" && quality1 != "" && sizeOfHeight1 != "" && long1 != "" ) {
                for (var i = 1; i <= listTr.length; i++) {
                    var width = $(listTr[i - 1]).find('td:eq(0)').text();
                    var count = $(listTr[i - 1]).find('td:eq(1)').text();

                    arrOfDesk[i] = [];
                    arrOfDesk[i][0] = width;
                    arrOfDesk[i][1] = count;
                }

                console.log(arrOfDesk);

                $.ajax({
                    method: "post",
                    url: "/createPackageOakObjectForExistDeliveryDoc",
                    contextType: "application/json",
                    data: {
                        breedID: breedID1,
                        arrayOfDesk: arrOfDesk,
                        deliveryId: deliveryId1,
                        codeOfPackage: codeOfPackage1,
                        quality: quality1,
                        sizeOfHeight: sizeOfHeight1,
                        length: long1
                    },
                    traditional: true,
                    success: function () {
                        location.reload();
                    },
                    error: function () {
                        alert("Error");
                    }
                });
            } else {
                alert("Заполните все поля!");
            }
        }
    </script>
    <!--    Add delivery package end-->

    <!--    Edit delivery start-->
    <script type="text/javascript">
        function editOakDriverInfo(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            // let trId =  $(trObj).attr('id');
            var trId =              $(trObj).find('td:eq(0)').attr('id');
            console.log("row id: "+trId);
            var truck =             $(trObj).find('td:eq(1)').text();
            var truckNum =          $(trObj).find('td:eq(2)').text();
            var trailerNum  =       $(trObj).find('td:eq(3)').text();
            var packDate  =         $(trObj).find('td:eq(4)').text();
            var packTime  =         $(trObj).find('td:eq(5)').text();
            var driver =            $(trObj).find('td:eq(6)').text();
            var phone =             $(trObj).find('td:eq(7)').text();
            var contract =          $(trObj).find('td:eq(8)').text();
            var destination =       $(trObj).find('td:eq(9)').text();
            var delDescription =    $(trObj).find('td:eq(10)').text();
            var contractId =        $(trObj).find('td:eq(11)').text();

            $('#driverOakId')                      .val(trId);
            $('#editOakIdOfTruck')                 .val(truck);
            $('#editOakDriverCredentionals')       .val(driver);
            $('#editOakDriverPhone')               .val(phone);
            $('#editOakNumberOfTruck')             .val(truckNum);
            $('#editOakNumberOfTrailer')           .val(trailerNum);
            $('#editOakPackDateInput')             .val(packDate);
            $('#editOakPackTimeInput')             .val(packTime);
            $('#editOakPackContractId')            .val(contract);
            $('#editOakPackDeliveryDestination')   .val(destination);
            $('#editOakDeliveryDescription')       .val(delDescription);
            $('#editOakPackContractId-hidden')     .val(contractId);

            $('#editOakDeliveryModal').modal('show');
        }
    </script>
    <!--    Edit delivery end-->

    <!--    Edit delivery package start-->
    <script type="text/javascript">
        function editOakDriverPackage(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            // let trId =  $(trObj).attr('id');
            var trId =              $(trObj).find('td:eq(0)').attr('id');
            console.log("row id: "+trId);
            var packCode =          $(trObj).find('th:eq(0)').text();
            var quality =           $(trObj).find('td:eq(1)').text();
            var packSize  =         $(trObj).find('td:eq(2)').text();
            var packLen  =          $(trObj).find('td:eq(3)').text();
            var summaryWidth  =     $(trObj).find('td:eq(4)').text();
            var descsCount =        $(trObj).find('td:eq(5)').text();
            var extent =            $(trObj).find('td:eq(6)').text();

            $('#editOakPackModalHeader')         .text("Редактировать пачку "+packCode);

            $('#driverOakPackageId')             .val(trId);
            $('#editOakIdOfPack')                .val(packCode);
            $('#editOakQuality')                 .val(quality);
            $('#editOakPackSize')                .val(packSize);
            $('#editOakPackLength')              .val(packLen);
            $('#editOakPackSummaryLen')          .val(summaryWidth);
            $('#editOakPackDescCount')           .val(descsCount);
            $('#editOakPackExtent')              .val(extent);

            $('#editOakDeliveryPackageModal').modal('show');
        }
    </script>
    <!--    Edit delivery package end-->

    <!--    Edit delivery package item start-->
    <script type="text/javascript">
        function editOakDriverPackageItem(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            // let trId =  $(trObj).attr('id');
            let trId =              $(trObj).attr('id');
            console.log("row id: "+trId);

            let expandedObj = trObj.parentElement.parentElement.parentElement.parentElement;
            let expandedId = $(expandedObj).attr('id');
            console.log("string-id: "+expandedId);
            let packageId = expandedId.replace(/\D+/g, "");
            console.log("parent-id: "+packageId);

            $('#deleteOakPackageId').val(packageId);


            var width =             $(trObj).find('td:eq(0)').text();
            var count =             $(trObj).find('td:eq(1)').text();

            $('#driverOakPackageContentId')              .val(trId);
            $('#editOakDeliveryPackageContentWidth')     .val(width);
            $('#editOakDeliveryPackageContentCount')     .val(count);

            $('#editOakDeliveryPackageContentModal').modal('show');
        }
    </script>
    <!--    Edit delivery package item end-->

    <!--    Add delivery package item start-->
    <script type="text/javascript">
        function addOakDriverPackageItems(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            let trId =              $(trObj).attr('id');
            let packageCode =       $(trObj).find('th:eq(0)').text();

            console.log("row id: "+trId);

            $('#addOakDriverPackageItemsModalHeader').text("Добавить позицию к пачке "+ packageCode);
            $('#addOakDriverPackageItemsPackId').val(trId);

            $('#addOakDeliveryPackageContentModal').modal('show');
        }
    </script>
    <!--    Add delivery package item end-->

    <!--    Delete delivery package start-->
    <script type="text/javascript">
        function deleteOakDriverPackage(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            let trId =  $(trObj).attr('id');
            $('#deleteOakPackModalId').val(trId);
            console.log(  $(trObj).attr('id'));

            let expandedObj = trObj.parentElement.parentElement.parentElement.parentElement;
            let expandedId = $(expandedObj).attr('id');
            console.log("string-id: "+expandedId);
            let deliveryId = expandedId.replace(/\D+/g, "");
            console.log("id: "+deliveryId);

            $('#deleteOakDeliveryId').val(deliveryId);

            var codeOfPackage = $(trObj).find('th:eq(0)').text();

            $('#deleteOakPackModalConfirmation').text(" Вы уверены, что хотите окончательно удалить пачку "+codeOfPackage+" ?");
            $('#deleteOakPackModal').modal('show');
        }
    </script>
    <!--    Delete delivery package end-->

    <!--    Delete delivery package item start-->
    <script type="text/javascript">
        function deleteOakDriverPackageItem(btnObj) {
            let trObj = btnObj.parentElement.parentElement;
            let trId =  $(trObj).attr('id');
            $('#deleteOakPackItemModalId').val(trId);
            console.log("row id: "+trId);

            let expandedObj = trObj.parentElement.parentElement.parentElement.parentElement;
            let expandedId = $(expandedObj).attr('id');
            console.log("string-id: "+expandedId);
            let packageId = expandedId.replace(/\D+/g, "");
            console.log("id: "+packageId);

            $('#deleteOakPackId').val(packageId);

            let width = $(trObj).find('td:eq(0)').text();
            let count = $(trObj).find('td:eq(1)').text();

            $('#deleteOakPackItemModalConfirmation').text(" Вы уверены, что хотите удалить позицию: "+width+"мм / "+count+"шт?");
            $('#deleteOakPackItemModal').modal('show');
        }
    </script>
    <!--    Delete delivery package item end-->

        <!-- Транспортировка -->
</th:block>