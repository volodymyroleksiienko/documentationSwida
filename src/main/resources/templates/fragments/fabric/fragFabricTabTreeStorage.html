<!--// TREE STORAGE TAB-->
<th:block xmlns="http://www.w3.org/1999/xhtml"
          xmlns:th="http://www.w3.org/1999/xhtml" th:fragment="treeStorage">
    <div class="tab-pane fade show active container-fluid" id="treestorage">
        <table class="table table-hover table-striped" id="treestoragetable-single" th:if="${mainTreeStorage!=null}">
            <br>
            <thead>
            <tr>
                <th scope="col">id</th>
                <th style="width: 30px"></th>
                <th scope="col">Дата последнего обновления</th>
                <th scope="col">Код партии</th>
                <th scope="col">Порода</th>
                <th scope="col" style="display: none">Описание</th>
                <th scope="col" style="display: none">Поставщик</th>
                <th scope="col" style="display: none">Поставщик id</th>
                <th scope="col" style="display: none">Ср. диаметр</th>
                <th scope="col" style="display: none">Кол-во колод</th>
                <th scope="col">Остаток, м<sup>3</sup></th>
                <th scope="col" style="display: none">Начальная куб-ра, м<sup>3</sup></th>
                <th scope="col" style="display: none">Примечание</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <div>
                <tr th:id="${mainTreeStorage.id}">
                    <td th:text="${mainTreeStorage.id}"></td>
                    <td  class="details-control" style="width: 30px" onclick="javascript:$('#parent'+this.id).toggle();" th:id="${mainTreeStorage.id}"></td>
                    <td th:text="${mainTreeStorage.date}"></td>
                    <th scope="row" th:text="${mainTreeStorage.codeOfProduct}"></th>
                    <td th:text="${mainTreeStorage.breedOfTree.breed}"></td>
                    <td th:text="${mainTreeStorage?.breedDescription}" style="display: none"></td>
                    <td th:text="${mainTreeStorage?.contrAgent?.nameOfAgent}" style="display: none"></td>
                    <td th:text="${mainTreeStorage?.contrAgent?.id}" style="display: none"></td>
                    <td th:text="${mainTreeStorage?.averageDiameter}" style="display: none"></td>
                    <td th:text="${mainTreeStorage?.countOfDeck}" style="display: none"></td>
                    <td th:text="${mainTreeStorage.extent}"></td>
                    <td th:text="${mainTreeStorage?.maxExtent}" style="display: none"></td>
                    <td scope="col" th:text="${mainTreeStorage.treeDescription}" style="display: none"></td>
                    <td>
                        <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" onclick="showCutModal(this)">
                            <i class="fas fa-th" data-toggle="tooltip" title="Распиловка"></i>
                        </button>
                    </td>
                </tr>

                <tr style="display: none" th:id="'parent'+${mainTreeStorage.id}">
                    <td style="display:none"></td>
                    <td colspan="13" class="child-table">
                        <table class="table table-hover table-striped parent-table" id="treeStorageSubTable">
                            <thead>
                            <tr>
                                <th scope="col">Дата</th>
                                <th scope="col">Номер пилорамы</th>
                                <th scope="col">Описание</th>
                                <th scope="col">Толщина, мм</th>
                                <th scope="col">Ширина, мм</th>
                                <th scope="col">Длина, мм</th>
                                <th scope="col">Кол-во досок, шт</th>
                                <th scope="col">Взято, м<sup>3</sup></th>
                                <th scope="col">Выход, м<sup>3</sup></th>
                                <th scope="col">Процент, %</th>
                                <th scope="col">Додано в</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="list : ${mainTreeStorage?.statisticInfoList}" >
                                <td th:text="${list?.date}"></td>
                                <td th:text="${list?.codeOfTeam}"></td>
                                <td>ds</td>
                                <td th:text="${list?.height}"></td>
                                <td>sh</td>
                                <td>dl</td>
                                <td>kl</td>
                                <td th:text="${list?.firstExtent}"></td>
                                <td th:text="${list?.extent}"></td>
                                <td th:text="${list?.percent}"></td>
                                <td th:text="${list?.rawStorage?.codeOfProduct}"></td>
                                <td>
                                    <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" onclick="showEditCutModal(this)">
                                        <i class="fas fa-pen" data-toggle="tooltip" title="Редактировать"></i>
                                    </button>
                                    <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" data-toggle="modal" onclick="returnToIncome(this)">
                                        <i class="fas fa-undo-alt" data-toggle="tooltip" title="Возвратить в приход"></i>
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                            <tfoot>
                                <tr style="background: #18bc9c; color: white;">
                                    <th colspan="7">ИТОГО :</th>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td colspan="2"></td>
                                </tr>
                            </tfoot>
                        </table>
                    </td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                    <td style="display:none"></td>
                </tr>
            </div>
            </tbody>
        </table>

        <hr>

        <table class="table table-hover table-striped" id="treestoragetable">
            <thead>
                <tr>
                    <th scope="col">id</th>
                    <th style="width: 30px"></th>
                    <th scope="col">Дата прихода</th>
                    <th scope="col">Код партии</th>
                    <th scope="col">Порода</th>
                    <th scope="col">Описание</th>
                    <th scope="col">Поставщик</th>
                    <th scope="col">Поставщик id</th>
                    <th scope="col">Ср. диаметр</th>
                    <th scope="col">Кол-во колод</th>
                    <th scope="col">Остаток, м<sup>3</sup></th>
                    <th scope="col">Начальная куб-ра, м<sup>3</sup></th>
                    <th scope="col">Примечание</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <div th:each="ts, index : ${treeStorageList}">
                     <tr th:id="${ts.id}">
                        <td th:text="${ts.id}"></td>
                        <td  class="details-control" style="width: 30px" onclick="javascript:$('#parent-'+this.id).toggle();" th:id="${ts.id}"></td>
                        <td th:text="${ts.date}"></td>
                        <th scope="row" th:text="${ts.codeOfProduct}"></th>
                        <td th:text="${ts.breedOfTree.breed}"></td>
                        <td th:text="${ts.breedDescription}"></td>
                        <td th:text="${ts?.contrAgent?.nameOfAgent}"></td>
                        <td th:text="${ts?.contrAgent?.id}"></td>
                        <td th:text="${ts?.averageDiameter}"></td>
                        <td th:text="${ts?.countOfDeck}"></td>
                        <td th:text="${ts.extent}"></td>
                        <td th:text="${ts.maxExtent}"></td>
                        <td scope="col" th:text="${ts.treeDescription}"></td>
                        <td>
                            <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" onclick="showEditModal(this)">
                                <i class="fas fa-pen" data-toggle="tooltip" title="Редактировать"></i>
                            </button>
                        </td>
                    </tr>

                     <tr style="display: none" th:id="'parent-'+${ts.id}">
                         <td style="display:none"></td>
                         <td colspan="13" class="child-table">
                             <table class="table table-hover table-striped parent-table">
                                 <thead>
                                 <tr>
                                     <th scope="col">Дата</th>
                                     <th scope="col">Толщина, мм</th>
                                     <th scope="col">Взято, м<sup>3</sup></th>
                                     <th scope="col">Выход, м<sup>3</sup></th>
                                     <th scope="col">Процент, %</th>
                                 </tr>
                                 </thead>
                                 <tbody>
                                     <tr th:each="list : ${ts?.statisticInfoList}" >
                                         <td th:text="${list?.date}"></td>
                                         <td th:text="${list?.height}"></td>
                                         <td th:text="${list?.firstExtent}"></td>
                                         <td th:text="${list?.extent}"></td>
                                         <td th:text="${list?.percent}"></td>
                                     </tr>
                                 </tbody>
                                 <tfoot>
                                     <tr>
                                         <th colspan="2">ИТОГО :</th>
                                         <td>0</td>
                                         <td>0</td>
                                         <td>0</td>
                                     </tr>
                                 </tfoot>
                             </table>
                         </td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                         <td style="display:none"></td>
                     </tr>
                </div>
            </tbody>

            <tfoot>
            <tr>
                <th scope="col">id</th>
                <th style="width: 30px"></th>
                <th scope="col">Дата прихода</th>
                <th scope="col">Код партии</th>
                <th scope="col">Порода</th>
                <th scope="col">Описание</th>
                <th scope="col">Поставщик</th>
                <th scope="col">Поставщик id</th>
                <th scope="col">Ср. диаметр</th>
                <th scope="col">Кол-во колод</th>
                <th scope="col">Остаток, м<sup>3</sup></th>
                <th scope="col">Начальная куб-ра, м<sup>3</sup></th>
                <th scope="col">Примечание</th>
                <th></th>
            </tr>
            </tfoot>
        </table>
        <!-- BUTTON -->
        <div class="float-action-button" th:if="${btnConfig?.equals('btnON')}">
            <button type="button" class="buttons btn btn-primary" title="История прихода" data-toggle="modal" data-placement="left" data-target="#exportHistoryModal">
                <i class="fas fa-history"></i>
            </button>
            <button type="button" class="buttons btn btn-primary" title="Экспорт фактический" data-toggle="modal" data-placement="left" data-target="#exportModal">
                <i class="far fa-file-excel"></i>
            </button>
            <button type="button" class="buttons main-button btn btn-primary" title="Добавить кругляк" data-toggle="modal" data-placement="left" data-target="#addIncomeModal">
                <i class="fa fa-plus"></i>
            </button>
        </div>
        <!-- BUTTON -->
    </div>
    <script>
        let rowTables = document.getElementsByClassName('parent-table');
        for (let i=0;i<rowTables.length;i++){
            let rowsList = rowTables[i].rows;
            let last = rowsList.length-1;

            let takenSum = 0.0;
            let outputSum = 0.0;
            let percentageSum = 0.0;

            for (let j = 1; j<rowsList.length-1; j++){
                if ((rowsList[j].cells[7].innerHTML)!=='' && !isNaN(parseFloat(rowsList[j].cells[7].innerHTML)) ){
                    takenSum+= parseFloat(rowsList[j].cells[7].innerHTML);
                    outputSum+= parseFloat(rowsList[j].cells[8].innerHTML);
                    percentageSum = outputSum/takenSum*100;
                } else{
                    continue;
                }
                console.log("tab: "+takenSum+"; "+outputSum+";"+percentageSum);
            }
            rowsList[last].cells[1].innerHTML=takenSum.toFixed(3);
            rowsList[last].cells[2].innerHTML=outputSum.toFixed(3);
            rowsList[last].cells[3].innerHTML=percentageSum.toFixed(3);
        }
    </script>

    <div class="modal fade" id="addIncomeModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Добавить кругляк</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/addTreeStorageRow-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">
                            <div class="col-6">
                                <label class="col-form-label" for="addCode">Код партии</label>
                                <input type="text" class="form-control" id="addCode" required="required" autocomplete="off" name="codeOfProduct" placeholder="Не заполнено">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="addSupplier">Поставщик</label>
                                <input type="text" class="form-control" list="suppliers1" id="addSupplier" autocomplete="off" name="nameOfAgent" onchange="setHiddenValue(this)" placeholder="Не заполнено" required="required">
                                <datalist id="suppliers1">
                                    <option  th:each="c : ${contrAgentList}" th:data-value="${c.id}" th:text="${c.nameOfAgent}" th:label="${c.addressOfCompany}"></option>
                                </datalist>
                                <input type="number" hidden="hidden"  name="contrAgent.id" id="addSupplier-hidden">
                            </div>
                        </div>


                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">
                            <div class="col-6">
                                <label class="control-label" for="addMaterial">Порода</label>
                                <input class="form-control" id="addMaterial" type="text" placeholder="Порода" th:value="${breedOfTreeList[breedId-1].breed}" name="" disabled="disabled">
                            </div>
                            <div class="col-6">
                                <label class="control-label" for="addBreedDescription">Описание</label>
                                <input class="form-control" id="addBreedDescription" type="text" placeholder="Не заполнено" name="breedDescription" required="required">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">
                            <div class="col-6">
                                <label class="control-label" for="addAmount">Кол-во колод</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="addAmount" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="countOfDeck">
                            </div>
                            <div class="col-6">
                                <label class="control-label" for="addAverageDiameter">Средний диаметр</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="addAverageDiameter" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="averageDiameter">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <label class="col-form-label" for="addVolume">Кубатура</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="м3" id="addVolume" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="extent" required="required">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="addIncomeDate">Дата прихода</label>
                                <input type="date" class="form-control" id="addIncomeDate" autocomplete="off" name="date" required="required">
                            </div>
                            <script type="text/javascript">
                                document.querySelector("#addIncomeDate").valueAsDate = new Date();
                            </script>
                        </div>
                        <label class="col-form-label" for="addDescription">Примечание</label>
                        <input type="text" class="form-control" id="addDescription" autocomplete="off" name="treeDescription" placeholder="Не заполнено">
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Добавить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit start -->
    <div class="modal fade" id="editTreeStorageCutModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editDryingModalHeader">Редактировать</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/XXX-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">
                        <div class="form-group">

                            <label class="col-form-label" for="editDryingModalCode">Номер пилорамы</label>
                            <input type="text" class="form-control" id="editDryingModalCode" required="required" placeholder="Не заполнено" autocomplete="off" name="codeOfProduct">

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px">
                                <div class="col-6">
                                    <label class="control-label" for="editDryingModalMaterial">Порода</label>
                                    <input type="text" class="form-control" id="editDryingModalMaterial" disabled="disabled">
                                </div>
                                <div class="col-6">
                                    <label class="control-label" for="editDryingModalMaterialDescr">Описание</label>
                                    <input class="form-control" id="editDryingModalMaterialDescr" type="text" placeholder="Не заполнено" name="breedDescription">
                                </div>
                            </div>

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                                <div class="col-4">
                                    <label class="col-form-label" for="editDryingModalThickness">Толщина, мм</label>
                                    <input type="number" min="1" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDryingModalThickness" required="required" autocomplete="off" placeholder="мм" name="sizeOfHeight"  oninput="calculateExtent()">
                                </div>
                                <div class="col-4">
                                    <label class="col-form-label" for="editDryingModalWidth">Ширина, мм</label>
                                    <input type="number" min="1" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDryingModalWidth" required="required" autocomplete="off" placeholder="мм" name="sizeOfWidth"  oninput="calculateExtent()">
                                </div>
                                <div class="col-4">
                                    <label class="col-form-label" for="editDryingModalLength">Длина, мм</label>
                                    <input type="number" min="0" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDryingModalLength" required="required" autocomplete="off" placeholder="мм" name="sizeOfLong"  oninput="calculateExtent()">
                                </div>
                            </div>

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                                <div class="col-6">
                                    <label class="col-form-label" for="editDryingModalCount">Количество досок</label>
                                    <input type="number" min="1" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDryingModalCount" required="required" autocomplete="off" placeholder="шт" name="countOfDesk" oninput=" calculateExtent()">
                                </div>
                                <div class="col-6">
                                    <label class="col-form-label" for="editDryingModalVolume">Кубатура м<sup>3</sup></label>
                                    <input type="number" min="0" step="any" pattern="[0-9]*\.?[0-9]*" class="form-control" id="editDryingModalVolume" required="required" readonly autocomplete="off" placeholder="мм" name="extent">
                                </div>
                            </div>
                        </div>
                        <!-- Insert rows -->
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Редактировать</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
<!--    Edit end -->

    <!--  Modal return confirmation start -->
    <div class="modal fade" id="returnToIncomeModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Возвращение</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <!--       TUT         -->
                <form th:action="@{'/fabric/returnRawPackageToTree-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">

                        <div class="form-group">
                            <input type="text" class="form-control" id="returnItemId" hidden="hidden" autocomplete="off" name="id">

                            <p id="returnItemModalConfirmation">
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary" id="submitReturnBtnRS">Подтвердить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--  Modal return confirmation end -->

    <!-- Add package start -->
    <div class="modal fade" id="cutModal">
        <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title ">Отправить на распиловку</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form >
                    <div class="modal-body">
                        <input type="number" hidden="hidden" id="breedIdPack" th:value="${breedId}">
                        <input type="text" hidden="hidden" id="userIdPack" th:value="${userId}">

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0">
                            <div class="col-4">
                                <label class="col-form-label" for="cutTreeStorageCode">Номер пилорамы</label>
                                <input type="text" class="form-control" id="cutTreeStorageCode" placeholder="Не заполнено" required="required" autocomplete="off">
                            </div>
                            <div class="col-4">
                                <label class="control-label" for="cutTreeStorageMaterial">Порода</label>
                                <input class="form-control" id="cutTreeStorageMaterial" type="text" placeholder="Порода" th:value="${breedOfTreeList[breedId-1].breed}" name="" disabled="disabled">
                            </div>
                            <div class="col-4">
                                <label class="control-label" for="cutTreeStorageUsedExtent" style="padding-top: 7px">Взято, м<sup>3</sup></label>
                                <input type="number" min="0" name="usedExtent" value="0.00" step="any" pattern="[0-9]*\.?[0-9]*" required="required"  class="form-control" id="cutTreeStorageUsedExtent"  autocomplete="off" placeholder="м3">
                            </div>
                            <div class="col-6" style="display: none">
                                <label class="control-label" for="cutTreeStorageRecycleExtent" style="padding-top: 7px">Отходы, м<sup>3</sup></label>
                                <input type="number" min="0" name="recycleExtent" value="0.00" step="any" pattern="[0-9]*\.?[0-9]*" required="required"  class="form-control" id="cutTreeStorageRecycleExtent"  autocomplete="off" placeholder="м3">
                            </div>
                        </div>

                        <hr>

                        <div class="row form-group" style="display: inline-flex; justify-content: center; align-items: baseline;">
                            <div class="col-4">
                                <label class="control-label" for="cutTreeStorageDescr">Описание</label>
                                <input class="form-control" id="cutTreeStorageDescr" placeholder="Не заполнено" type="text" name="breedDescription">
                            </div>
                            <div class="col-4">
                                <label class="control-label" for="cutTreeStorageSize">Толщина, мм</label>
                                <input type="number" min="1" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="cutTreeStorageSize" required="required" oninput="cutTreeStorageExtentCalc()">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="cutTreeStorageLength">Длина, мм</label>
                                <input type="number" min="0" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="cutTreeStorageLength" required="required" autocomplete="off" oninput="cutTreeStorageExtentCalc()">
                            </div>
                            <div class="col-4">
                                <label class="col-form-label" for="cutTreeStorageWidth">Ширина, мм</label>
                                <input type="number" min="0" step="10" pattern="[0-9]*\.?[0-9]*" placeholder="мм" class="form-control" id="cutTreeStorageWidth" required="required" autocomplete="off" value="100" oninput="cutTreeStorageExtentCalc()">
                            </div>
                            <div class="col-4">
                                <label class="control-label" for="cutTreeStorageCount">Количество</label>
                                <input type="number" min="0" step="1" pattern="[0-9]*\.?[0-9]*" placeholder="шт" class="form-control" id="cutTreeStorageCount" required="required" autocomplete="off" oninput="cutTreeStorageExtentCalc()">
                            </div>
                            <div class="col-4">
                                <label class="control-label" for="cutTreeStorageExtent">Кубатура, м<sup>3</sup></label>
                                <input type="number" value="0.00" disabled="disabled" class="form-control" id="cutTreeStorageExtent"  autocomplete="off" placeholder="м3">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end">
                            <div class="col-6">
                                <label class="control-label" for="cutTreeStorageTotalExtent">Суммарная кубатура, м<sup>3</sup></label>
                                <input type="text" disabled="disabled" class="form-control" id="cutTreeStorageTotalExtent" value="0.00"  autocomplete="off" placeholder="м3">
                            </div>
                            <div class="col-6" style="display: inline-flex; text-align: right; justify-content: flex-end; margin-top: 1rem;">
                                <button id="buttonForAddingCutTreeStorageItem" type="button" class="btn btn-primary" style="width: 50%; margin-right: 5px">Добавить позицию</button>
                                <button type="button" class="btn btn-primary" style="width: 50%" id="cutTreeStorageButton">Отправить</button>
                            </div>
                        </div>
                    </div>
                    <table class="table table-hover table-striped" id="tableForcuttingTreeStorage" style="padding-left: 1rem; padding-right: 1rem">
                        <thead>
                        <tr>
                            <th scope="col">Описание</th>
                            <th scope="col">Толщина, мм</th>
                            <th scope="col">Ширина, мм</th>
                            <th scope="col">Длина, мм</th>
                            <th scope="col">Количество, шт</th>
                            <th scope="col">Кубатура, м<sup>3</sup></th>
                            <th></th>
                        </tr>
                        </thead>

                        <tbody id="listOfOakPackageRowsId">
                        <!-- <tr></tr> -->
                        </tbody>

                        <tfoot>
                            <th scope="col">Описание</th>
                            <th scope="col">Толщина, мм</th>
                            <th scope="col">Ширина, мм</th>
                            <th scope="col">Длина, мм</th>
                            <th scope="col">Количество, шт</th>
                            <th scope="col">Кубатура, м<sup>3</sup></th>
                            <th></th>
                        </tfoot>
                    </table>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="clearInitialPackageButton">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!--Add package end-->


    <div class="modal fade" id="cutModal-2">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cutModalHeader">Отправить на распиловку / в отходы</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/cutOfTreeStorage-'+${userId}+'-'+${breedId}}" method="post" id="cutModalForm">
                    <div class="modal-body">
                        <!-- Insert rows -->
                        <div class="form-group" id="formGroupCutOfTreeStorage">
                            <input type="text" id="idOfTreeStorageRow" hidden="" name="idOfTreeStorageRow">
                            <input type="text" id="maxPossibleExtent" hidden="">

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                                <div class="col-6">
                                    <label class="col-form-label" for="addTreeStorageLeft">Осталось на складе</label>
                                    <input type="number" min="0" step="any" class="form-control" placeholder="м3" id="addTreeStorageLeft" pattern="[0-9]*\.?[0-9]*" autocomplete="off" required="required" name="extentOfTreeStorage">
                                </div>
                                <div class="col-6">
                                    <label class="col-form-label" for="extentOfWaste">Отходы</label>
                                    <input type="number" min="0" step="any" class="form-control" placeholder="м3" id="extentOfWaste" pattern="[0-9]*\.?[0-9]*" autocomplete="off" required="required" name="extentOfWaste">
                                </div>
                            </div>

                            <label class="col-form-label" for="addRawStorageCode">Код партии</label>
                            <input type="text" class="form-control" id="addRawStorageCode" required="required" placeholder="Не заполнено" autocomplete="off" name="codeOfProduct">

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                                <div class="col-6">
                                    <label class="col-form-label" for="addRawStorageThickness">Толщина</label>
                                    <input type="number" class="form-control" id="addRawStorageThickness" required="required" autocomplete="off" placeholder="мм" min="0" name="sizeOfHeight">                                </div>
                                <div class="col-6">
                                    <label class="col-form-label" for="addRawStorageWidth">Ширина</label>
                                    <input type="number" class="form-control" id="addRawStorageWidth" required="required" autocomplete="off" placeholder="мм" min="0" name="sizeOfWidth">                                </div>
                            </div>

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                                <div class="col-6">
                                    <label class="col-form-label" for="addRawStorageLength">Длина</label>
                                    <input type="number" class="form-control" id="addRawStorageLength" required="required" autocomplete="off" placeholder="мм" min="0" name="sizeOfLong">                                </div>
                                <div class="col-6">
                                    <label class="col-form-label" for="addRawStorageCount">Количество досок</label>
                                    <input type="number" class="form-control" id="addRawStorageCount" required="required" autocomplete="off" placeholder="шт" min="0" name="countOfDesk">                                </div>
                            </div>
                        </div>
                        <!-- Insert rows -->
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Отправить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit income -->
    <div class="modal fade" id="editIncome">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Редактировать</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/editTreeStorageRow-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">
                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <input type="text" id="incomeTreeStorageId" hidden="" name="id">
                                <label class="col-form-label" for="editIncomeCode">Код партии</label>
                                <input type="text" class="form-control" id="editIncomeCode" required="required" autocomplete="off" placeholder="Не заполнено" name="codeOfProduct">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editIncomeSupplier">Поставщик</label>
                                <input type="text" class="form-control" list="suppliers2" id="editIncomeSupplier" autocomplete="off" name="nameOfAgent" placeholder="Не заполнено" onchange="setHiddenValue(this)" required="required">
                                <datalist id="suppliers2">
                                    <option  th:each="c, index : ${contrAgentList}" th:text="${c.nameOfAgent}" th:data-value="${c.id}"></option>
                                </datalist>
                                <input type="number" hidden="hidden"  name="contrAgent.id" id="editIncomeSupplier-hidden">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">
                            <div class="col-6">
                                <label class="control-label" for="editIncomeMaterial">Порода</label>
                                <input class="form-control" id="editIncomeMaterial" type="text" placeholder="Порода" name="breedOfTreeType" th:value="${breedOfTreeList[breedId-1].breed}" disabled="disabled">
                            </div>
                            <div class="col-6">
                                <label class="control-label" for="editIncomeMaterialDesc">Описание</label>
                                <input class="form-control" id="editIncomeMaterialDesc" type="text" placeholder="Не заполнено"  name="breedDescription" required="required">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">
                            <div class="col-6">
                                <label class="control-label" for="editAmount">Кол-во колод</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="editAmount" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="countOfDeck">
                            </div>
                            <div class="col-6">
                                <label class="control-label" for="editAverageDiameter">Средний диаметр</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="editAverageDiameter" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="averageDiameter">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <label class="col-form-label" for="editIncomeVolume">Остаток</label>
                                <input type="number" step="any" min="0" class="form-control" placeholder="м3" id="editIncomeVolume" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="extent" required="required">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editIncomeInitialVolume">Начальная куб-ра</label>
                                <input type="number" step="any" min="0" class="form-control" placeholder="м3" id="editIncomeInitialVolume" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="maxExtent" required="required">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <label class="col-form-label" for="editIncomeDate">Дата прихода</label>
                                <input type="date" class="form-control" id="editIncomeDate" autocomplete="off" name="date" required="required">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editIncomeDescription">Примечание</label>
                                <input type="text" class="form-control" id="editIncomeDescription" autocomplete="off" name="treeDescription" placeholder="Не заполнено">
                            </div>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Сохранить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Edit income -->
    <!-- Export start-->
    <div class="modal fade" id="exportModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Экспортировать таблицу</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/exportTreeStorageXLS-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">
                        <div class="form-group row">
                            <label for="startDateInput" class="col-2 col-form-label">Начало</label>
                            <div class="col-10">
                                <input class="form-control" type="date" value="2020-01-01" id="startDateInput" required="required" name="startDate">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="endDateInput" class="col-2 col-form-label">Конец</label>
                            <div class="col-10">
                                <input class="form-control" type="date" id="endDateInput" required="required" name="endDate">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Скачать</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        document.querySelector("#endDateInput").valueAsDate = new Date();
    </script>
    <!-- Export end -->

    <!-- Export history start-->
    <div class="modal fade" id="exportHistoryModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Экспортировать историю прихода кругляка</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/exportHistoryTreeStorageXLS-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">
                        <div class="form-group row">
                            <label for="startDateInput" class="col-2 col-form-label">Начало</label>
                            <div class="col-10">
                                <input class="form-control" type="date" value="2020-01-01" id="startHistDateInput" required="required" name="startDate">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="endDateInput" class="col-2 col-form-label">Конец</label>
                            <div class="col-10">
                                <input class="form-control" type="date" id="endHistDateInput" required="required" name="endDate">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Скачать</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        document.querySelector("#endHistDateInput").valueAsDate = new Date();
    </script>
    <!-- Export history end -->

    <script type="text/javascript" th:src="@{../js/fabric/income/tree.storage.pine.js}"></script>

</th:block>











<!--// OAK TREE STORAGE TAB-->


<th:block xmlns="http://www.w3.org/1999/xhtml"
          xmlns:th="http://www.w3.org/1999/xhtml" th:fragment="treeStorageOAK">
    <div class="tab-pane fade show active container-fluid" id="treestorage">
        <table class="table table-hover table-striped" id="treestoragetable">
            <br>
                <thead>
                    <tr style="background: #18bc9c; color: white;">
                        <th colspan="11">Суммарная кубатура кругляка на складе:</th>
                        <th colspan="3" style="text-align: right">123123.00 м<sup>3</sup></th>
                    </tr>
                    <tr>
                        <th scope="col">id</th>
                        <th style="width: 30px"></th>
                        <th scope="col">Дата прихода</th>
                        <th scope="col">Код партии</th>
                        <th scope="col">Порода</th>
                        <th scope="col">Описание</th>
                        <th scope="col">Поставщик</th>
                        <th scope="col">Поставщик id</th>
                        <th scope="col">Ср. диаметр</th>
                        <th scope="col">Кол-во колод</th>
                        <th scope="col">Остаток, м<sup>3</sup></th>
                        <th scope="col">Куб-ра (начальная), м<sup>3</sup></th>
                        <th scope="col">Примечание</th>
                        <th></th>
                    </tr>
                </thead>

                <tbody>
                    <div th:each="ts, index : ${treeStorageList}">
                        <tr th:id="${ts.id}">
                            <td th:text="${ts.id}"></td>
                            <td  class="details-control" style="width: 30px" onclick="javascript:$('#parent'+this.id).toggle();" th:id="${ts.id}"></td>
                            <td th:text="${ts.date}"></td>
                            <th scope="row" th:text="${ts.codeOfProduct}"></th>
                            <td th:text="${ts.breedOfTree.breed}"></td>
                            <td th:text="${ts.breedDescription}"></td>
                            <td th:text="${ts.contrAgent.nameOfAgent}"></td>
                            <td th:text="${ts.contrAgent.id}"></td>
                            <td th:text="${ts?.averageDiameter}"></td>
                            <td th:text="${ts?.countOfDeck}"></td>
                            <td th:text="${ts.extent}"></td>
                            <td th:text="${ts.maxExtent}"></td>
                            <td th:text="${ts.treeDescription}"></td>
                            <td>
                                <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" onclick="showCutOakModal(this)">
                                    <i class="fas fa-th" data-toggle="tooltip" title="Распиловка"></i>
                                </button>
                                <button th:if="${btnConfig?.equals('btnON')}" type="button" class="btn btn-primary btn-sm" onclick="showEditOakModal(this)">
                                    <i class="fas fa-pen" data-toggle="tooltip" title="Редактировать"></i>
                                </button>
                            </td>
                        </tr>

                        <tr style="display: none" th:id="'parent'+${ts.id}">
                            <td style="display:none"></td>
                            <td colspan="13" class="child-table">
                                <table class="table table-hover table-striped parent-table">
                                    <thead>
                                    <tr>
                                        <th scope="col">Дата</th>
                                        <th scope="col">Толщина, мм</th>
                                        <th scope="col">Взято, м<sup>3</sup></th>
                                        <th scope="col">Выход, м<sup>3</sup></th>
                                        <th scope="col">Процент, %</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="list : ${ts?.statisticInfoList}" >
                                        <td th:text="${list?.date}"></td>
                                        <td th:text="${list?.height}"></td>
                                        <td th:text="${list?.firstExtent}"></td>
                                        <td th:text="${list?.extent}"></td>
                                        <td th:text="${list?.percent}"></td>
                                    </tr>
                                    </tbody>
                                    <tfoot>
                                    <tr>
                                        <th colspan="2">ИТОГО :</th>
                                        <td>0</td>
                                        <td>0</td>
                                        <td>0</td>
                                    </tr>
                                    </tfoot>
                                </table>
                            </td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                            <td style="display:none"></td>
                        </tr>
                    </div>
                </tbody>
                <tfoot>
                    <tr>
                        <th scope="col">id</th>
                        <th style="width: 30px"></th>
                        <th scope="col">Дата прихода</th>
                        <th scope="col">Код партии</th>
                        <th scope="col">Порода</th>
                        <th scope="col">Описание</th>
                        <th scope="col">Поставщик</th>
                        <th scope="col">Поставщик id</th>
                        <th scope="col">Ср. диаметр</th>
                        <th scope="col">Кол-во колод</th>
                        <th scope="col">Остаток, м<sup>3</sup></th>
                        <th scope="col">Куб-ра (начальная), м<sup>3</sup></th>
                        <th scope="col">Примечание</th>
                        <th></th>
                    </tr>
                </tfoot>
            </table>
        <!-- BUTTON -->
        <div class="float-action-button" th:if="${btnConfig?.equals('btnON')}">
            <button type="button" class="buttons btn btn-primary" title="История прихода" data-toggle="modal" data-placement="left" data-target="#exportHistoryModal">
                <i class="fas fa-history"></i>
            </button>
            <button type="button" class="buttons btn btn-primary" title="Экспорт фактический" data-toggle="modal" data-placement="left" data-target="#exportOakModal">
                <i class="far fa-file-excel"></i>
            </button>
<!--            <button type="button" class="buttons btn btn-primary" title="Добавить пиломатериалы" data-toggle="modal" data-placement="left" data-target="#addOakIncomeToRawStorageModal">-->
<!--                <i class="fa fa-plus"></i>-->
<!--            </button>-->
            <button type="button" class="buttons main-button btn btn-primary" title="Добавить кругляк" data-toggle="modal" data-placement="left" data-target="#addOakIncomeModal">
                <i class="fa fa-plus"></i>
            </button>
        </div>
        <!-- BUTTON -->
    </div>

    <script>
        let rowTables = document.getElementsByClassName('parent-table');
        for (let i=0;i<rowTables.length;i++){
            let rowsList = rowTables[i].rows;
            let last = rowsList.length-1;

            let takenSum = 0.0;
            let outputSum = 0.0;
            let percentageSum = 0.0;

            for (let j = 1; j<rowsList.length-1; j++){
                if ((rowsList[j].cells[2].innerHTML)!=='' && !isNaN(parseFloat(rowsList[j].cells[2].innerHTML)) ){
                    takenSum+= parseFloat(rowsList[j].cells[2].innerHTML);
                    outputSum+= parseFloat(rowsList[j].cells[3].innerHTML);
                    percentageSum = outputSum/takenSum*100;
                } else{
                    continue;
                }

                console.log("row: "+takenSum+"; "+outputSum+";"+percentageSum+"%");
            }
            rowsList[last].cells[1].innerHTML=takenSum.toFixed(3);
            rowsList[last].cells[2].innerHTML=outputSum.toFixed(3);
            rowsList[last].cells[3].innerHTML=percentageSum.toFixed(3);
        }
    </script>

    <div class="modal fade" id="addOakIncomeModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Добавить кругляк</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/addTreeStorageRow-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">
                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <label class="col-form-label" for="addOakCode">Код партии</label>
                                <input type="text" class="form-control" id="addOakCode" required="required" autocomplete="off" name="codeOfProduct" placeholder="Не заполнено">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="addOakSupplier">Поставщик</label>
                                <input type="text" class="form-control" list="suppliers1oak" id="addOakSupplier" autocomplete="off" name="nameOfAgent" placeholder="Не заполнено" onchange="setHiddenValue(this)">
                                <datalist id="suppliers1oak">
                                    <option  th:each="c : ${contrAgentList}" th:data-value="${c.id}" th:text="${c.nameOfAgent}" th:label="${c.addressOfCompany}"></option>
                                </datalist>
                                <input type="number" hidden="hidden"  name="contrAgent.id" id="addOakSupplier-hidden">
                            </div>
                        </div>


                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <label class="control-label" for="addOakMaterial">Порода</label>
                                <input class="form-control" id="addOakMaterial" type="text" placeholder="Порода" th:value="${breedOfTreeList[breedId-1].breed}" name="" disabled="disabled">
                            </div>
                            <div class="col-6">
                                <label class="control-label" for="addOakBreedDescription">Описание</label>
                                <input class="form-control" id="addOakBreedDescription" type="text"  name="breedDescription" placeholder="Не заполнено">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">
                            <div class="col-6">
                                <label class="control-label" for="addAmountOak">Кол-во колод</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="addAmountOak" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="countOfDeck">
                            </div>
                            <div class="col-6">
                                <label class="control-label" for="addOakAverageDiameter">Средний диаметр</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="addOakAverageDiameter" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="averageDiameter">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <label class="col-form-label" for="addOakVolume">Кубатура</label>
                                <input type="number" step="any" min="0" class="form-control" placeholder="м3" id="addOakVolume" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="extent" required="required">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="addOakIncomeDate">Дата прихода</label>
                                <input type="date" class="form-control" id="addOakIncomeDate" autocomplete="off" name="date" required="required">
                            </div>
                            <script type="text/javascript">
                                document.querySelector("#addOakIncomeDate").valueAsDate = new Date();
                            </script>
                        </div>
                        <label class="col-form-label" for="addOakDescription">Примечание</label>
                        <input type="text" class="form-control" id="addOakDescription" autocomplete="off" name="treeDescription" placeholder="Не заполнено">
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Добавить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!--  Add to raw storage  -->
<!--    <div class="modal fade" id="addOakIncomeToRawStorageModal">-->
<!--        <div class="modal-dialog modal-dialog-centered" role="document">-->
<!--            <div class="modal-content">-->
<!--                <div class="modal-header">-->
<!--                    <h5 class="modal-title">Добавить пиломатериалы</h5>-->
<!--                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                        <span aria-hidden="true">&times;</span>-->
<!--                    </button>-->
<!--                </div>-->
<!--                <form th:action="@{'/fabric/addDeskFromProvider-'+${userId}+'-'+${breedId}}" method="post">-->
<!--                    <div class="modal-body">-->
<!--                        <label class="col-form-label" for="addOakToRawStorageCode">Код партии</label>-->
<!--                        <input type="text" class="form-control" id="addOakToRawStorageCode" required="required" autocomplete="off" placeholder="Не заполнено" name="codeOfProduct">-->

<!--                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">-->
<!--                            <div class="col-6">-->
<!--                                <label class="control-label" for="addOakToRawStorageMaterial">Порода</label>-->
<!--                                <input class="form-control" id="addOakToRawStorageMaterial" type="text" placeholder="Порода" th:value="${breedOfTreeList[breedId-1].breed}" name="" disabled="disabled">-->
<!--                            </div>-->
<!--                            <div class="col-6">-->
<!--                                <label class="control-label" for="addOakToRawStorageBreedDescription">Описание породы</label>-->
<!--                                <input class="form-control" id="addOakToRawStorageBreedDescription" type="text" placeholder="Не заполнено" name="breedDescription" required="required">-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        <label class="col-form-label" for="addOakToRawStorageSupplier">Контракт</label>-->
<!--                        <input type="text" class="form-control" list="suppliers3oak" id="addOakToRawStorageSupplier" autocomplete="off" name="nameOfAgent" placeholder="Не заполнено" onchange="setHiddenValue(this)">-->
<!--                        <datalist id="suppliers3oak">-->
<!--                            <option  th:each="c, index : ${orderList}" th:text="${c.codeOfOrder}" th:label="${c?.contrAgent?.nameOfAgent}" th:data-value="${c.id}"></option>-->
<!--                        </datalist>-->
<!--                        <input type="number" hidden="hidden"  name="contractId" id="addOakToRawStorageSupplier-hidden">-->

<!--                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">-->
<!--                            <div class="col-6">-->
<!--                                <label class="col-form-label" for="addSupplier">Поставщик</label>-->
<!--                                <input type="text" class="form-control" list="suppliers1" id="addSupplier" autocomplete="off" name="nameOfAgent" onchange="setHiddenValue(this)" placeholder="Не заполнено" required="required">-->
<!--                                <datalist id="suppliers1">-->
<!--                                    <option  th:each="c : ${contrAgentList}" th:data-value="${c.id}" th:text="${c.nameOfAgent}" th:label="${c.addressOfCompany}"></option>-->
<!--                                </datalist>-->
<!--                                <input type="number" hidden="hidden"  name="contrAgent.id" id="addSupplier-hidden">-->
<!--                            </div>-->
<!--                            <div class="col-6">-->
<!--                                <label class="control-label" for="addOakAverageDiameter">Средний диаметр</label>-->
<!--                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="addOakAverageDiameter" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="avgDiameter">-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">-->
<!--                            <div class="col-6">-->
<!--                                <label class="control-label" for="addOakToRawStorageThickness">Толщина</label>-->
<!--                                <input class="form-control" id="addOakToRawStorageThickness" type="number" placeholder="мм" min="1" required="required" autocomplete="off" name="sizeOfHeight">-->
<!--                            </div>-->
<!--                            <div class="col-6">-->
<!--                                <label class="col-form-label" for="addOakToRawStorageVolume">Кубатура</label>-->
<!--                                <input type="number" step="any" min="0" class="form-control" placeholder="м3" id="addOakToRawStorageVolume" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="extent" required="required">-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        <label class="col-form-label" for="addOakToRawStorageDesc">Примечания</label>-->
<!--                        <input type="text" class="form-control" id="addOakToRawStorageDesc"  autocomplete="off" name="description" placeholder="Не заполнено">-->
<!--                    </div>-->
<!--                    <div class="modal-footer">-->
<!--                        <button type="submit" class="btn btn-primary">Добавить</button>-->
<!--                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>-->
<!--                    </div>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
    <!-- // Add to raw storage  -->

    <div class="modal fade" id="cutOakModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cutOakModalHeader">Отправить на распиловку / в отходы</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/cutOfTreeStorage-'+${userId}+'-'+${breedId}}" method="post" id="cutOakModalForm">
                    <div class="modal-body">
                        <!-- Insert rows -->
                        <div class="form-group" id="formGroupCutOfOakTreeStorage">
                            <input type="text" id="idOfOakTreeStorageRow" hidden="" name="idOfTreeStorageRow">
                            <input type="text" id="maxPossibleOakExtent" hidden="">

                            <label class="col-form-label" for="cutOakRawStorageCode">Код</label>
                            <input type="text" class="form-control" id="cutOakRawStorageCode" required="required" autocomplete="off" placeholder="Не заполнено" name="codeOfProduct">

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                                <div class="col-6">
                                    <label class="col-form-label" for="addRawStorageBreed">Порода</label>
                                    <input type="text" class="form-control" id="addRawStorageBreed" required="required" disabled="disabled" autocomplete="off" th:value="${breedOfTreeList[breedId-1].breed}">
                                </div>
                                <div class="col-6">
                                    <label class="col-form-label" for="cutOakRawStorageBreedDesc">Описание</label>
                                    <input type="text" class="form-control" id="cutOakRawStorageBreedDesc" autocomplete="off" placeholder="Не заполнено" name="breedDescription">
                                </div>
                            </div>

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                                <div class="col-6">
                                    <label class="col-form-label" for="cutOakRawStorageExtent">Кубатура после распиловки</label>
                                    <input type="number" min="0" step="any" class="form-control" id="cutOakRawStorageExtent" required="required" pattern="[0-9]*\.?[0-9]*" autocomplete="off" placeholder="м3" name="extent">
                                </div>
                                <div class="col-6">
                                    <label class="col-form-label" for="cutOakRawStorageUsedExtent">Использовано кругляка</label>
                                    <input type="number" min="0" step="any" class="form-control" id="cutOakRawStorageUsedExtent" required="required" pattern="[0-9]*\.?[0-9]*" autocomplete="off" placeholder="м3" name="usedExtent">
                                </div>
                            </div>

                            <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                                <div class="col-6">
                                    <label class="col-form-label" for="extentOfWasteOak">Отходы</label>
                                    <input type="number" min="0" step="any" class="form-control" placeholder="м3" id="extentOfWasteOak" pattern="[0-9]*\.?[0-9]*" autocomplete="off" required="required" name="extentOfWaste">
                                </div>
                                <div class="col-6">
                                    <label class="col-form-label" for="cutOakRawStorageThickness">Толщина</label>
                                    <input type="number" class="form-control" id="cutOakRawStorageThickness" required="required" autocomplete="off" placeholder="мм" min="1" name="sizeOfHeight">
                                </div>
                            </div>

                            <label class="col-form-label" for="cutOakRawStorageDescription">Примечание</label>
                            <input type="text" class="form-control" id="cutOakRawStorageDescription" autocomplete="off" placeholder="Не заполнено" name="treeDescription">
                        </div>
                        <!-- Insert rows -->
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Отправить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Edit income -->
    <div class="modal fade" id="editOakIncome">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Редактировать</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/editTreeStorageRow-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">
                        <input type="text" id="incomeOakTreeStorageId" hidden="" name="id">

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">
                            <div class="col-6">
                                <label class="col-form-label" for="editOakIncomeCode">Код партии</label>
                                <input type="text" class="form-control" id="editOakIncomeCode" required="required" autocomplete="off" name="codeOfProduct">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editOakIncomeSupplier">Поставщик</label>
                                <input type="text" class="form-control" list="suppliers2oak" id="editOakIncomeSupplier" placeholder="Не заполнено" required="required" autocomplete="off" name="nameOfAgent" onchange="setHiddenValue(this)">
                                <datalist id="suppliers2oak">
                                    <option  th:each="c : ${contrAgentList}" th:data-value="${c.id}" th:text="${c.nameOfAgent}" th:label="${c.addressOfCompany}"></option>
                                </datalist>
                                <input type="number" hidden="hidden"  name="contrAgent.id" id="editOakIncomeSupplier-hidden">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px">
                            <div class="col-6">
                                <label class="control-label" for="editOakIncomeMaterial">Порода</label>
                                <input class="form-control" id="editOakIncomeMaterial" type="text" name="breedOfTreeType" th:value="${breedOfTreeList[breedId-1].breed}" disabled="disabled">
                            </div>
                            <div class="col-6">
                                <label class="control-label" for="editOakIncomeMaterialDesc">Описание</label>
                                <input class="form-control" id="editOakIncomeMaterialDesc" type="text" placeholder="Не заполнено" name="breedDescription" >
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0; margin-top: 5px;">
                            <div class="col-6">
                                <label class="control-label" for="editOakAmount">Кол-во колод</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="editOakAmount" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="countOfDeck">
                            </div>
                            <div class="col-6">
                                <label class="control-label" for="editOakAverageDiameter">Средний диаметр</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="Не заполнено" id="editOakAverageDiameter" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="averageDiameter">
                            </div>
                        </div>

                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <label class="col-form-label" for="editOakIncomeVolume">Остаток</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="м3" id="editOakIncomeVolume" required="required" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="extent">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editOakIncomeInitialVolume">Начальная куб-ра</label>
                                <input type="number" min="0" step="any" class="form-control" placeholder="м3" id="editOakIncomeInitialVolume" required="required" pattern="[0-9]*\.?[0-9]*" autocomplete="off" name="maxExtent">
                            </div>
                        </div>
                        <div class="form-group row d-flex" style="align-items: flex-end; margin-bottom: 0;">
                            <div class="col-6">
                                <label class="col-form-label" for="editOakIncomeDate">Дата прихода</label>
                                <input type="date" class="form-control" id="editOakIncomeDate" autocomplete="off" name="date" required="required">
                            </div>
                            <div class="col-6">
                                <label class="col-form-label" for="editOakIncomeDescription">Примечание</label>
                                <input type="text" class="form-control" id="editOakIncomeDescription" autocomplete="off" name="treeDescription" placeholder="Не заполнено">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Сохранить</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Edit income -->
    <!-- Export start-->
    <div class="modal fade" id="exportOakModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Экспортировать таблицу</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/exportTreeStorageXLS-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">
                        <div class="form-group row">
                            <label for="startDateInput" class="col-2 col-form-label">Начало</label>
                            <div class="col-10">
                                <input class="form-control" type="date" value="2020-01-01" id="startDateInput" required="required" name="startDate">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="endDateInput" class="col-2 col-form-label">Конец</label>
                            <div class="col-10">
                                <input class="form-control" type="date" id="endDateInput" required="required" name="endDate">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button submit" class="btn btn-primary">Скачать</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        document.querySelector("#endDateInput").valueAsDate = new Date();
    </script>
    <!-- Export end -->

    <!-- Export history start-->
    <div class="modal fade" id="exportHistoryModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Экспортировать историю прихода кругляка</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form th:action="@{'/fabric/exportHistoryTreeStorageXLS-'+${userId}+'-'+${breedId}}" method="post">
                    <div class="modal-body">
                        <div class="form-group row">
                            <label for="startDateInput" class="col-2 col-form-label">Начало</label>
                            <div class="col-10">
                                <input class="form-control" type="date" value="2020-01-01" id="startHistDateInput" required="required" name="startDate">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label for="endDateInput" class="col-2 col-form-label">Конец</label>
                            <div class="col-10">
                                <input class="form-control" type="date" id="endHistDateInput" required="required" name="endDate">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary">Скачать</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        document.querySelector("#endHistDateInput").valueAsDate = new Date();
    </script>
    <!-- Export history end -->

    <script type="text/javascript" th:src="@{../js/fabric/income/tree.storage.oak.js}"></script>

</th:block>












